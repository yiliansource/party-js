const party=function(){function t(){return Math.random()}function e(e,n){return r(e,n,t())}function r(t,e,r){return(1-r)*t+r*e}function n(t,r){return t*e(1-r/2,1+r/2)}function i(t,r){return t+e(-r/2,r/2)}function o(t,e,r){let n,i,o;if(t/=360,e/=100,r/=100,0===e)n=i=o=r;else{const a=(t,e,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t),s=r<.5?r*(1+e):r+e-r*e,h=2*r-s;n=a(h,s,t+1/3),i=a(h,s,t),o=a(h,s,t-1/3)}const a=t=>{const e=Math.round(255*t).toString(16);return 1===e.length?"0"+e:e};return`#${a(n)}${a(i)}${a(o)}`}function a(t,e,n){function i(t){return t.toString(16)}function o(t){return parseInt(t,16)}n=null!=n?n:.5;for(var a="#",s=1;s<=5;s+=2){for(var h=o(t.substr(s,2)),l=o(e.substr(s,2)),c=i(Math.floor(r(h,l,n)));c.length<2;)c="0"+c;a+=c}return a}function s(t){if(!(t instanceof b))throw new TypeError("Invalid transform supplied to lighting calculation.");return Math.abs(Math.cos(t.rotation.x)*Math.cos(t.rotation.y))}function h(t,e,r){return t&&null!=t[e]?t[e]:r}function l(t,e,r){t&&null==t[e]&&(t[e]=r)}function c(t,e){for(var r in e)e.hasOwnProperty(r)&&l(t,r,e[r])}function f(e){if(["number","string","bigint","boolean","undefined"].includes(typeof e))return e;if("function"==typeof e)return e();if(Array.isArray(e))return e[Math.floor(t()*e.length)];throw new Error("Invalid randomized value")}function m(e,r,l){let c=f(h(r,"count",1)),m=f(h(r,"spread",0)),p=f(h(r,"angle",0));for(let d=0;d<c;d++){let c=i(p,m)*A,d=f(h(r,"velocity",0)),y=f(h(r,"angularVelocity",0)),g=f(h(r,"size",8));u({shape:f(h(r,"shape","rectangle")),acceleration:new b(new v(0,h(r,"gravity",!0)*w.gravityPixels)),velocity:new b(new v(Math.sin(c),Math.cos(c)).scale(d),v.generate(()=>f(y))),transform:new b(new v((e.left||0)+n((e.width||0)/2,2*h(r,"randomizePosition",!0))+(l?window.scrollX:0),(e.top||0)+n((e.height||0)/2,2*h(r,"randomizePosition",!0))+(l?window.scrollY:0)),v.generate(()=>Math.PI*h(r,"randomizeRotation",!0)*t()),v.one.scale(g)),color:f(h(r,"color",()=>o(360*t(),100,70))),lighting:h(r,"lighting",!0),lifetime:0,draw:function(t){t.fillStyle=this.lighting?a("#000000",this.color,.25+.75*s(this.transform)):this.color;const e=.2;let r=this.lifetime>e?1:this.lifetime/e,n=P[this.shape];if(!n)throw Error(`Unknown shape '${this.shape}'.`);let i=new b(this.transform.position,this.transform.rotation,this.transform.scale.scale(r));n.withTransform(i).draw(t)},update:function(t){this.velocity=this.velocity.applyDelta(this.acceleration,t),this.transform=this.transform.applyDelta(this.velocity,t),this.lifetime+=t}})}}function u(t){for(;B.length>=w.maxParticles;)B.shift();B.push(t)}function p(t){B.forEach(e=>e.update(t));let e=Math.max(document.documentElement.offsetHeight,window.innerHeight);B=B.filter(t=>t.transform.position.y<=e)}function d(){N.canvas.width=window.innerWidth,N.canvas.height=window.innerHeight,N.clearRect(0,0,N.canvas.width,N.canvas.height),B.forEach(t=>t.draw(N))}function y(t){let e=(t-V)/1e3;B.length>0&&(p(e),d()),V=t,window.requestAnimationFrame(y)}const w={maxParticles:1e3,gravityPixels:800},g={typeCheckFailed:"The supplied parameter must be of type '{0}'.",abstractMethodNotImplemented:"The type is required to implement the '{0}' method.",invalidPathNode:"Invalid node '{0}' detected in SVG path.",malformedPathNode:"Malformed node '{0}' detected in SVG path."};class x{constructor(t){this.index=0,this.items=t}first(){return this.reset(),this.next()}next(){return this.items[this.index++]}hasNext(){return this.index<this.items.length}reset(){this.index=0}each(t){for(let e=this.first();this.hasNext();e=this.next())t(e)}}class v{constructor(t,e,r){this.x=t||0,this.y=e||0,this.z=r||0}add(t){if(!(t instanceof v))throw new TypeError(g.typeCheckFailed.format("Vector"));return new v(this.x+t.x,this.y+t.y,this.z+t.z)}scale(t){if("number"==typeof t)return new v(this.x*t,this.y*t,this.z*t);if(t instanceof v)return new v(this.x*t.x,this.y*t.y,this.z*t.z);throw new TypeError(g.typeCheckFailed.format("Number/Vector"))}static get zero(){return new v}static get one(){return new v(1,1,1)}static generate(t){if("function"!=typeof t)throw new TypeError(g.typeCheckFailed.format("Function"));return new v(t(),t(),t())}}class b{constructor(t,e,r){this.position=t||v.zero,this.rotation=e||v.zero,this.scale=r||v.zero}applyDelta(t,e){if(!(t instanceof b))throw new TypeError(g.typeCheckFailed.format("Transform"));if("number"!=typeof e)throw new TypeError(g.typeCheckFailed.format("Number"));return new b(this.position.add(t.position.scale(e)),this.rotation.add(t.rotation.scale(e)),this.scale.add(t.scale.scale(e)))}apply(t){if(!(t instanceof v))throw new TypeError(g.typeCheckFailed.format("Vector"));let e=t.x*this.scale.x,r=t.y*this.scale.y;return new v(this.position.x+(e*Math.cos(this.rotation.z)-r*Math.sin(this.rotation.z))*Math.cos(this.rotation.y),this.position.y+(e*Math.sin(this.rotation.z)+r*Math.cos(this.rotation.z))*Math.cos(this.rotation.x))}}class C{constructor(t,e,r,n){this.xmin=t,this.ymin=e,this.xmax=r,this.ymax=n}static fromVertices(t){let e=new C(1/0,1/0,0,0);for(let r=0;r<t.length;r++){let n=t[r];e.xmin=Math.min(n.x,e.xmin),e.ymin=Math.min(n.y,e.ymin),e.xmax=Math.max(n.x,e.xmax),e.ymax=Math.max(n.y,e.ymax)}return e}}class z{constructor(t,e,r,n,i){this.xmin=t,this.ymin=e,this.width=i?r:Math.max(r,n),this.height=i?n:Math.max(r,n)}transformX(t){return(t-this.xmin-this.width/2)/this.width}transformY(t){return(t-this.ymin-this.height/2)/this.height}transformPoint(t){return new v(this.transformX(t.x),this.transformY(t.y))}static fromBounds(t){return new z(t.xmin,t.ymin,t.xmax-t.xmin,t.ymax-t.ymin)}}class E{withTransform(t){if(!(t instanceof b))throw new TypeError(g.typeCheckFailed.format("Transform"));return this.transform=t,this}getBounds(){throw new Error(g.abstractMethodNotImplemented.format("getBounds()"))}normalize(t){throw new Error(g.abstractMethodNotImplemented.format("normalize(viewBox)"))}draw(t){throw new Error(g.abstractMethodNotImplemented.format("draw(context)"))}}class M extends E{constructor(t){if(super(),!Array.isArray(t))throw new TypeError(g.typeCheckFailed.format("Array"));this.points=t}getBounds(){return C.fromVertices(this.points)}normalize(t){if(t=t||z.fromBounds(this.getBounds()),!(t instanceof z))throw new TypeError(g.typeCheckFailed.format("ViewBox"));this.points=this.points.map(e=>t.transformPoint(e))}draw(t){if(!(t instanceof CanvasRenderingContext2D))throw new TypeError(g.typeCheckFailed.format("CanvasRenderingContext2D"));t.beginPath();for(let e=0;e<this.points.length;e++){let r=this.transform?this.transform.apply(this.points[e]):this.points[e];(0==e?t.moveTo:t.lineTo).apply(t,[r.x-window.scrollX,r.y-window.scrollY])}t.closePath(),t.fill()}}class T extends E{constructor(t){super(),this.nodes=[];let e=new v,r=new x(t);for(;r.hasNext();){let n=r.next();"string"!=typeof n&&(n=t.slice(0,r.index).reverse().find(t=>"string"==typeof t),"m"==n.toLowerCase()&&(n=n.toLowerCase()==n?"l":"L"),r.index--);let i,o,a=n.toLowerCase()==n,s=a?new v(e.x,e.y):new v;switch(n.toLowerCase()){case"m":i="move",o=[s.x+r.next(),s.y+r.next()],e.x=o[0],e.y=o[1];break;case"l":i="line",o=[s.x+r.next(),s.y+r.next()],e.x=o[0],e.y=o[1];break;case"h":i="line",o=[s.x+r.next(),e.y],e.x=o[0];break;case"v":i="line",o=[e.x,s.y+r.next()],e.y=o[1];break;case"z":i="line";let t=this.nodes.find(t=>"move"==t.type).getResultingCursor();o=[t.x,t.y],e.x=t.x,e.y=t.y;break;case"c":i="bezier",o=[];for(let t=0;t<3;t++)o.push(s.x+r.next()),o.push(s.y+r.next());e.x=o[o.length-2],e.y=o[o.length-1];break;case"s":i="bezier";let a=this.nodes[this.nodes.length-1];if("bezier"!=a.type)throw new Error(g.malformedPathNode.format(n));let h=e.x+(a.args[4]-a.args[2]),l=e.y+(a.args[5]-a.args[3]);o=[h,l];for(let t=0;t<2;t++)o.push(s.x+r.next()),o.push(s.y+r.next());e.x=o[o.length-2],e.y=o[o.length-1]}this.nodes.push(new k(i,o))}this.nodes.length>50&&console.warn("Complex shape registered, high usage may impact framerate.")}getBounds(){return C.fromVertices(this.nodes.map(t=>t.getResultingCursor()))}normalize(t){if(t=t||z.fromBounds(this.getBounds()),!(t instanceof z))throw new TypeError(g.typeCheckFailed.format("ViewBox"));let e=new x(this.nodes);for(;e.hasNext();){let r=e.next();for(let e=0;e<r.args.length;e+=2)r.args[e]=t.transformX(r.args[e]),r.args[e+1]=t.transformY(r.args[e+1])}}draw(t){if(!(t instanceof CanvasRenderingContext2D))throw new TypeError(g.typeCheckFailed.format("CanvasRenderingContext2D"));t.beginPath(),new x(this.nodes).each(e=>e.run(t,this.transform)),t.fill()}}class k{constructor(t,e){this.type=t,this.args=e}getResultingCursor(){return new v(this.args[this.args.length-2],this.args[this.args.length-1])}run(t,e){let r;switch(this.type){case"move":r=t.moveTo;break;case"line":r=t.lineTo;break;case"bezier":r=t.bezierCurveTo}let n=[];for(let t=0;t<this.args.length;t+=2){let r=new v(this.args[t],this.args[t+1]);e&&(r=e.apply(r)),n.push(r.x-window.scrollX),n.push(r.y-window.scrollY)}r.apply(t,n)}}const F=document.createElement("canvas");F.id="party-js-canvas",F.style="position: fixed; left: 0; top: 0; pointer-events: none;";const N=F.getContext("2d");document.body?document.body.appendChild(F):window.addEventListener("load",()=>document.body.appendChild(F));var B=[];const P={square:new M([new v(-.5,.5),new v(.5,.5),new v(.5,-.5),new v(-.5,-.5)]),rectangle:new M([new v(-.3,1),new v(.3,1),new v(.3,-1),new v(-.3,-1)])},A=(Math.PI,Math.PI/180);String.prototype.format=function(){var t=this;for(var e in arguments)t=t.replace(new RegExp("\\{"+e+"\\}","g"),arguments[e]);return t};var V=0;return window.requestAnimationFrame(y),{area:function(t,e,r){m(t,e,null==r||r)},element:function(t,e){e=e||{},c(e,{shape:party.array(["square","rectangle"]),count:party.variation(40,.5),spread:party.constant(80),size:party.variation(10,.8),velocity:party.variation(-300,1),angularVelocity:party.minmax(1,6)}),this.area(t.getBoundingClientRect(),e)},position:function(t,e,r){r=r||{},c(r,{shape:party.array(["square","rectangle"]),count:party.variation(40,.5),spread:party.constant(80),size:party.variation(10,.8),velocity:party.variation(-300,1),angularVelocity:party.minmax(1,6)}),this.area({left:t,top:e},r)},cursor:function(t){let e=window.event;if(null==e.clientX||null==e.clientY)return console.error("Calling 'party.cursor()' with no current mouse event is not allowed.");this.position(e.clientX,e.clientY,t)},screen:function(t){t=t||{},c(t,{shape:party.array(["square","rectangle"]),count:party.variation(window.innerWidth/1980*500,.5),size:party.variation(10,.8),velocity:party.variation(-100,2),angularVelocity:party.minmax(1,6)}),this.area({width:window.innerWidth,height:-window.innerHeight},t)},registerShape:function(t,e){if(Array.isArray(e))P[t]=new M(e);else if("string"==typeof e){let n=new DOMParser,i=n.parseFromString(e,"application/xml"),o=i.getElementsByTagName("parsererror")[0];if(o)throw new Error("Invalid SVG shape.");var r;let a=i.getElementsByTagName("svg")[0];a&&a.hasAttribute("viewBox")&&(r=z.fromBounds(a.getAttribute("viewBox").split(" ").map(t=>parseFloat(t))));let s,h=i.getElementsByTagName("polygon")[0],l=i.getElementsByTagName("path")[0];if(h){let t=h.getAttribute("points"),e=/(-?\d*\.\d+|-?\d+)/g,r=t.match(e),n=[];for(let t=0;t<r.length;t+=2)n.push(new v(parseFloat(r[t]),parseFloat(r[t+1])));s=new M(n)}else if(l){let t=l.getAttribute("d"),e=/([A-Za-z]|-?\d*\.\d+|-?\d+)/g,r=t.match(e),n=[];for(let t=0;t<r.length;t++){let e=r[t],i=parseFloat(e);n.push(isNaN(i)?e:i)}s=new T(n)}if(!s)throw new Error("No shape was determined from the SVG.");s.normalize(r),P[t]=s}},constant:function(t){return t},variation:function(t,e,r){if("number"!=typeof t||"number"!=typeof e)throw new TypeError(g.typeCheckFailed.format("Number"));return()=>(r?i:n)(t,e)},minmax:function(t,r){if("number"!=typeof t||"number"!=typeof r)throw new TypeError(g.typeCheckFailed.format("Number"));return()=>e(t,r)},array:function(t){if(!Array.isArray(t))throw new TypeError(g.typeCheckFailed.format("Array"));return t}}}();