const party=function(){function t(){return Math.random()}function n(n,i){return e(n,i,t())}function e(t,n,e){return(1-e)*t+e*n}function i(t,e){return t*n(1-e/2,1+e/2)}function o(t,e){return t+n(-e/2,e/2)}function r(t,n,e){let i,o,r;if(t/=360,n/=100,e/=100,0===n)i=o=r=e;else{const a=(t,n,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(n-t)*e:e<.5?n:e<2/3?t+(n-t)*(2/3-e)*6:t),s=e<.5?e*(1+n):e+n-e*n,l=2*e-s;i=a(l,s,t+1/3),o=a(l,s,t),r=a(l,s,t-1/3)}const a=t=>{const n=Math.round(255*t).toString(16);return 1===n.length?"0"+n:n};return`#${a(i)}${a(o)}${a(r)}`}function a(t,n,i){function o(t){return t.toString(16)}function r(t){return parseInt(t,16)}i=null!=i?i:.5;for(var a="#",s=1;s<=5;s+=2){for(var l=r(t.substr(s,2)),c=r(n.substr(s,2)),h=o(Math.floor(e(l,c,i)));h.length<2;)h="0"+h;a+=h}return a}function s(t){if(!(t instanceof g))throw new TypeError("Invalid transform supplied to lighting calculation.");return Math.abs(Math.cos(t.rotation.x)*Math.cos(t.rotation.y))}function l(t,n,e){return t&&null!=t[n]?t[n]:e}function c(t,n,e){t&&null==t[n]&&(t[n]=e)}function h(t,n){for(var e in n)n.hasOwnProperty(e)&&c(t,e,n[e])}function p(n,e,c){let h=i(l(c,"count",1),l(c,"countVariation",0)),p=l(c,"angleSpan",0),w=l(c,"rotationVelocityLimit",0),f=l(c,"scaleVariation",0);for(let d=0;d<h;d++){let h=o(0,p)*z,d=i(l(c,"yVelocity",0),l(c,"yVelocityVariation",0)),v=i(l(c,"size",8),f);u({shape:l(c,"shape","square"),acceleration:new g(new m(0,l(c,"gravity",!0)*y.gravityPixels),m.zero),velocity:new g(new m(Math.sin(h)*d,Math.cos(h)*d),m.generate(()=>w*t())),transform:new g(new m((n.left||0)+i((n.width||0)/2,2*l(c,"randomizePosition",!0))+(e?window.scrollX:0),(n.top||0)+i((n.height||0)/2,2*l(c,"randomizePosition",!0))+(e?window.scrollY:0)),m.generate(()=>Math.PI*l(c,"randomizeRotation",!0)*t()),m.one.scale(v)),color:l(c,"color",l(c,"colorFunction",()=>r(360*t(),100,70))()),lifetime:0,draw:function(t){t.fillStyle=y.applyLighting?a("#000000",this.color,.25+.75*s(this.transform)):this.color;const n=.2;let e=this.lifetime>n?1:this.lifetime/n,i=M[this.shape];if(!i)throw Error(`Unknown shape '${this.shape}'.`);i.applyTransform(new g(0,0,m.one.scale(e))).applyTransform(this.transform).draw(t)},update:function(t){this.velocity=this.velocity.applyDelta(this.acceleration,t),this.transform=this.transform.applyDelta(this.velocity,t),this.lifetime+=t}})}}function u(t){for(;E.length>=y.maxParticles;)E.shift();E.push(t)}function w(t){E.forEach(n=>n.update(t));let n=Math.max(document.documentElement.offsetHeight,window.innerHeight);E=E.filter(t=>t.transform.position.y<=n)}function f(){T.canvas.width=window.innerWidth,T.canvas.height=window.innerHeight,T.clearRect(0,0,T.canvas.width,T.canvas.height),E.forEach(t=>t.draw(T))}function d(t){let n=(t-P)/1e3;E.length>0&&(w(n),f()),P=t,window.requestAnimationFrame(d)}const y={maxParticles:1e3,gravityPixels:800,applyLighting:!0};class m{constructor(t,n,e){this.x=t||0,this.y=n||0,this.z=e||0}add(t){if(!(t instanceof m))throw new TypeError("Invalid vector supplied to add operation.");return new m(this.x+t.x,this.y+t.y,this.z+t.z)}scale(t){if("number"!=typeof t)throw new TypeError("Invalid scale supplied to scale operation.");return new m(this.x*t,this.y*t,this.z*t)}static get zero(){return new m}static get one(){return new m(1,1,1)}static generate(t){return"function"!=typeof t?new TypeError("Invalid factory function for generated vector."):new m(t(),t(),t())}}class g{constructor(t,n,e){this.position=t||m.zero,this.rotation=n||m.zero,this.scale=e||m.zero}applyDelta(t,n){if(!(t instanceof g))throw new TypeError("Invalid transform.");if("number"!=typeof n)throw new TypeError("Invalid delta supplied to transformation.");return new g(this.position.add(t.position.scale(n)),this.rotation.add(t.rotation.scale(n)),this.scale.add(t.scale.scale(n)))}}class v{applyTransform(t){throw new Error("The shape object needs to implement the applyTransform method.")}draw(t){throw new Error("The shape object needs to implement the draw method.")}static transformPoints(t,n){if(!Array.isArray(t))throw new TypeError("Non-array was supplied as points array.");if(!(n instanceof g))throw new TypeError("Invalid transform supplied to transformation");return t.map(t=>{let e=t.x*n.scale.x,i=t.y*n.scale.y;return new m(n.position.x+(e*Math.cos(n.rotation.z)-i*Math.sin(n.rotation.z))*Math.cos(n.rotation.y),n.position.y+(e*Math.sin(n.rotation.z)+i*Math.cos(n.rotation.z))*Math.cos(n.rotation.x))})}}class x extends v{constructor(t){if(super(),!Array.isArray(t))throw new TypeError("Invalid points definition.");this.points=t}applyTransform(t){return new x(v.transformPoints(this.points,t))}draw(t){if(!(t instanceof CanvasRenderingContext2D))throw new TypeError("Invalid rendering context.");T.beginPath();for(let n=0;n<this.points.length;n++){let e=this.points[n].x-window.scrollX,i=this.points[n].y-window.scrollY;(0==n?t.moveTo:t.lineTo).apply(t,[e,i])}T.closePath(),T.fill()}}const V=document.createElement("canvas");V.id="party-js-canvas",V.style="position: fixed; left: 0; top: 0; pointer-events: none;";const T=V.getContext("2d");document.body?document.body.appendChild(V):window.addEventListener("load",()=>document.body.appendChild(V));var E=[];const M={square:new x([new m(-.5,.5),new m(.5,.5),new m(.5,-.5),new m(-.5,-.5)]),rectangle:new x([new m(-.3,1),new m(.3,1),new m(.3,-1),new m(-.3,-1)])},z=(Math.PI,Math.PI/180);var P=0;return window.requestAnimationFrame(d),{element:function(t,n){n=n||{},h(n,{count:40,countVariation:.5,angleSpan:80,yVelocity:-300,yVelocityVariation:1,rotationVelocityLimit:6,scaleVariation:.8}),p(t.getBoundingClientRect(),!0,n)},position:function(t,n,e){e=e||{},h(e,{count:40,countVariation:.5,angleSpan:80,yVelocity:-300,yVelocityVariation:1,rotationVelocityLimit:6,scaleVariation:.8});let i={left:t,top:n};p(i,!0,e)},cursor:function(t){let n=window.event;if(null==n.clientX||null==n.clientY)return console.error("Calling 'party.cursor()' with no current mouse event is not allowed.");this.position(window.event.clientX,window.event.clientY,t)},screen:function(t){t=t||{},h(t,{count:window.innerWidth/1980*500,countVariation:.5,angleSpan:0,yVelocity:-100,yVelocityVariation:2,rotationVelocityLimit:6,scaleVariation:.8});let n={width:window.innerWidth,height:-window.innerHeight};p(n,!0,t)},registerShape:function(t,n){if(Array.isArray(n))M[t]=new x(n);else if("string"==typeof n){let i=new DOMParser,o=i.parseFromString(n,"application/xml"),r=o.getElementsByTagName("polygon")[0];if(null!=r){let n=r.getAttribute("points"),i=/(\d+(\.\d+)?)/g,o=n.match(i),a=[];for(let t=0;t<o.length;t+=2)a.push(new m(parseFloat(o[t]),parseFloat(o[t+1])));function e(t,n,e){return t.reduce(function(t,i){return(e?t[n]<i[n]:t[n]>i[n])?t:i})}let s={xmin:e(a,"x",!0).x,xmax:e(a,"x",!1).x,ymin:e(a,"y",!0).y,ymax:e(a,"y",!1).y};s.width=s.xmax-s.xmin,s.height=s.ymax-s.ymin,a=a.map(t=>new m((t.x-s.xmin-s.width/2)/s.width,(t.y-s.ymin-s.height/2)/s.height)),M[t]=new x(a)}}}}}();