(self.webpackChunkparty_js_docs=self.webpackChunkparty_js_docs||[]).push([[689],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return l},kt:function(){return f}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=r.createContext({}),c=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=c(e.components);return r.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=c(n),f=i,h=p["".concat(u,".").concat(f)]||p[f]||d[f]||o;return n?r.createElement(h,a(a({ref:t},l),{},{components:n})):r.createElement(h,a({ref:t},l))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=p;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:i,a[1]=s;for(var c=2;c<o;c++)a[c]=n[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},4489:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(3552),i=n(6945),o=n.n(i),a=n(7294),s="demoCodeblock_2Smj",u="background_3s0i",c=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.render=function(){return a.createElement("div",{className:s},this.props.children,a.createElement("div",{className:u,onClick:this.clickHandler.bind(this)},a.createElement("p",null,"Click me to try it out!")))},n.clickHandler=function(e){e.persist(),this.props.method(o(),e)},t}(a.Component)},4782:function(e,t,n){"use strict";n.d(t,{p_:function(){return o},Lk:function(){return a},iW:function(){return s}});var r=n(6945),i=n.n(r);function o(e){i().confetti(e)}function a(e){i().sparkles(e)}function s(e){var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","M316.722,29.761c66.852,0,121.053,54.202,121.053,121.041c0,110.478-218.893,257.212-218.893,257.212S0,266.569,0,150.801 C0,67.584,54.202,29.761,121.041,29.761c40.262,0,75.827,19.745,97.841,49.976C240.899,49.506,276.47,29.761,316.722,29.761z");var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 512 512"),n.setAttribute("height","20"),n.setAttribute("width","20"),n.appendChild(t),i().scene.current.createEmitter({emitterOptions:{loops:1,useGravity:!1,modules:[(new(i().ModuleBuilder)).drive("size").by((function(e){return.5+.3*(Math.cos(10*e)+1)})).build(),(new(i().ModuleBuilder)).drive("rotation").by((function(e){return new(i().Vector)(0,0,100).scale(e)})).relative().build()]},emissionOptions:{rate:0,bursts:[{time:0,count:i().variation.skew(20,10)}],sourceSampler:i().sources.dynamicSource(e),angle:i().variation.range(0,360),initialSpeed:400,initialColor:i().variation.gradientSample(i().Gradient.simple(i().Color.fromHex("#ffa68d"),i().Color.fromHex("#fd3a84")))},rendererOptions:{shapeFactory:n,applyLighting:void 0}})}},8493:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Circle=void 0;var n=function(){function e(e,t,n){void 0===n&&(n=0),this.x=e,this.y=t,this.radius=n}return e.zero=new e(0,0),e}();t.Circle=n},6558:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Color=void 0;var r=n(7720),i=function(){function e(e,t,n){this.values=new Float32Array(3),this.rgb=[e,t,n]}return Object.defineProperty(e.prototype,"r",{get:function(){return this.values[0]},set:function(e){this.values[0]=Math.floor(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return this.values[1]},set:function(e){this.values[1]=Math.floor(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return this.values[2]},set:function(e){this.values[2]=Math.floor(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rgb",{get:function(){return[this.r,this.g,this.b]},set:function(e){this.r=e[0],this.g=e[1],this.b=e[2]},enumerable:!1,configurable:!0}),e.prototype.mix=function(t,n){return void 0===n&&(n=.5),new e(r.lerp(this.r,t.r,n),r.lerp(this.g,t.g,n),r.lerp(this.b,t.b,n))},e.prototype.toHex=function(){var e=function(e){return e.toString(16).padStart(2,"0")};return"#"+e(this.r)+e(this.g)+e(this.b)},e.prototype.toString=function(){return"rgb("+this.values.join(", ")+")"},e.fromHex=function(t){return t.startsWith("#")&&(t=t.substr(1)),new e(parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16))},e.fromHsl=function(t,n,r){if(t/=360,r/=100,0===(n/=100))return new e(r,r,r);var i=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},o=function(e){return Math.min(255,256*e)},a=r<.5?r*(1+n):r+n-r*n,s=2*r-a;return new e(o(i(s,a,t+1/3)),o(i(s,a,t)),o(i(s,a,t-1/3)))},e.white=new e(255,255,255),e.black=new e(0,0,0),e}();t.Color=i},4369:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Gradient=void 0;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.interpolate=function(e,t,n){return e.mix(t,n)},t.solid=function(e){return new t({value:e,time:.5})},t.simple=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=1/(e.length-1);return new(t.bind.apply(t,o([void 0],e.map((function(e,t){return{value:e,time:t*r}})))))},t}(n(1288).Spline);t.Gradient=a},5020:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(8493),t),i(n(6558),t),i(n(4369),t),i(n(8437),t),i(n(8872),t),i(n(3828),t)},8437:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.NumericSpline=void 0;var o=n(7720),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.interpolate=function(e,t,n){return o.slerp(e,t,n)},t}(n(1288).Spline);t.NumericSpline=a},8872:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rect=void 0;var n=function(){function e(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this.x=e,this.y=t,this.width=n,this.height=r}return e.fromScreen=function(){return new e(window.scrollX,window.scrollY,window.innerWidth,window.innerHeight)},e.fromElement=function(t){var n=t.getBoundingClientRect();return new e(window.scrollX+n.x,window.scrollY+n.y,n.width,n.height)},e.zero=new e(0,0),e}();t.Rect=n},1288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spline=void 0;var r=n(7720),i=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Splines require at least one key.");if(Array.isArray(e[0]))throw new Error("You are trying to pass an array to the spline constructor, which is not supported. Try to spread the array into the constructor instead.");this.keys=e}return e.prototype.evaluate=function(e){if(0===this.keys.length)throw new Error("Attempt to evaluate a spline with no keys.");if(1===this.keys.length)return this.keys[0].value;var t=this.keys.sort((function(e,t){return e.time-t.time})),n=t.findIndex((function(t){return t.time>e}));if(0===n)return t[0].value;if(-1===n)return t[t.length-1].value;var i=t[n-1],o=t[n],a=r.invlerp(i.time,o.time,e);return this.interpolate(i.value,o.value,a)},e}();t.Spline=i},3828:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;var i=n(7720),o=function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.values=new Float32Array(3),this.xyz=[e,t,n]}return Object.defineProperty(e.prototype,"x",{get:function(){return this.values[0]},set:function(e){this.values[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.values[1]},set:function(e){this.values[1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this.values[2]},set:function(e){this.values[2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xyz",{get:function(){return[this.x,this.y,this.z]},set:function(e){this.values[0]=e[0],this.values[1]=e[1],this.values[2]=e[2]},enumerable:!1,configurable:!0}),e.prototype.magnitude=function(){return Math.sqrt(this.sqrMagnitude())},e.prototype.sqrMagnitude=function(){return this.x*this.x+this.y*this.y+this.z*this.z},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z)},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z)},e.prototype.scale=function(t){return"number"==typeof t?new e(this.x*t,this.y*t,this.z*t):new e(this.x*t.x,this.y*t.y,this.z*t.z)},e.prototype.normalized=function(){var t=this.magnitude();return 0!==t?this.scale(1/t):new(e.bind.apply(e,r([void 0],this.xyz)))},e.prototype.angle=function(e){return i.rad2deg*Math.acos((this.x*e.x+this.y*e.y+this.z*e.z)/(this.magnitude()*e.magnitude()))},e.prototype.cross=function(t){return new e(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},e.prototype.dot=function(e){return this.magnitude()*e.magnitude()*Math.cos(i.deg2rad*this.angle(e))},e.prototype.toString=function(){return"Vector("+this.values.join(", ")+")"},e.from2dAngle=function(t){return new e(Math.cos(t*i.deg2rad),Math.sin(t*i.deg2rad))},e.zero=new e(0,0,0),e.one=new e(1,1,1),e.right=new e(1,0,0),e.up=new e(0,1,0),e.forward=new e(0,0,1),e}();t.Vector=o},9065:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.particleContainer=t.debugContainer=t.rootContainer=void 0;var r=n(7509),i=n(4530);function o(e,t){Object.assign(e.style,t)}function a(e){return e&&e.isConnected}t.rootContainer=new i.Lazy((function(){var e=document.createElement("div");return e.id="party-js-container",o(e,{position:"absolute",left:"0",top:"0",pointerEvents:"none",userSelect:"none",zIndex:r.settings.zIndex.toString()}),document.body.appendChild(e),window.requestAnimationFrame((function t(){a(e)&&(e.style.height=document.body.offsetHeight+"px",e.style.width=document.body.offsetWidth+"px"),window.requestAnimationFrame(t)})),e}),a),t.debugContainer=new i.Lazy((function(){var e=document.createElement("div");return e.id="party-js-debug",o(e,{position:"absolute",top:"0",left:"0",margin:"0.5em",padding:"0.5em 1em",border:"2px solid rgb(0, 0, 0, 0.2)",background:"rgb(0, 0, 0, 0.1)",color:"#555",fontFamily:"monospace"}),t.rootContainer.current.appendChild(e),e}),a),t.particleContainer=new i.Lazy((function(){var e=document.createElement("div");return e.id="party-js-particles",o(e,{width:"100%",height:"100%",overflow:"hidden",perspective:"100vw"}),t.rootContainer.current.appendChild(e),e}),a)},5915:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Debug=void 0;var i=n(9065),o=n(7509),a=function(){function e(e){this.scene=e,this.refreshRate=8,this.refreshTimer=1/this.refreshRate}return e.prototype.tick=function(e){var t=i.debugContainer.current,n=o.settings.debug?"block":"none";t.style.display!==n&&(t.style.display=n),o.settings.debug&&(this.refreshTimer+=e,this.refreshTimer>1/this.refreshRate&&(this.refreshTimer=0,t.innerHTML=this.getDebugInformation(e).join("<br>")))},e.prototype.getDebugInformation=function(e){var t=this.scene.emitters.length,n=this.scene.emitters.reduce((function(e,t){return e+t.particles.length}),0),i=["<b>party.js Debug</b>","--------------","FPS: "+Math.round(1/e),"Emitters: "+t,"Particles: "+n],o=this.scene.emitters.map((function(e){return["\u2b6f: "+(e.currentLoop+1)+"/"+(e.options.loops>=0?e.options.loops:"\u221e"),"\u03a3p: "+e.particles.length,e.isExpired?"<i>expired</i>":"\u03a3t: "+e.durationTimer.toFixed(3)+"s"].join(", ")}));return i.push.apply(i,r(["--------------"],o)),i},e}();t.Debug=a},6945:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(5020),o=n(8232),a=n(5356),s=n(3120),u=n(7509),c=n(7720),l=n(2450),d=n(4123),p=n(3779),f=n(6256),h=n(6922),m=n(3012),v=n(3644),y=new v.Lazy((function(){if("undefined"==typeof document||"undefined"==typeof window)throw new Error("It seems like you are trying to run party.js in a non-browser-like environment, which is not supported.");return new s.Scene})),g=r(r(r(r(r({},i),m),p),l),{scene:y,settings:u.settings,Particle:a.Particle,Emitter:o.Emitter,variation:h,sources:f,random:d,math:c,util:v,forceInit:function(){y.current}});t.default=g},8232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=void 0;var r=n(3828),i=n(7509),o=n(6922),a=n(6814),s=n(6755),u=n(5356),c=function(){function e(e){this.particles=[],this.currentLoop=0,this.durationTimer=0,this.emissionTimer=0,this.attemptedBurstIndices=[],this.options=a.overrideDefaults(s.getDefaultEmitterOptions(),null==e?void 0:e.emitterOptions),this.emission=a.overrideDefaults(s.getDefaultEmissionOptions(),null==e?void 0:e.emissionOptions),this.renderer=a.overrideDefaults(s.getDefaultRendererOptions(),null==e?void 0:e.rendererOptions)}return Object.defineProperty(e.prototype,"isExpired",{get:function(){return this.options.loops>=0&&this.currentLoop>=this.options.loops},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canRemove",{get:function(){return 0===this.particles.length},enumerable:!1,configurable:!0}),e.prototype.clearParticles=function(){return this.particles.splice(0).length},e.prototype.tick=function(e){if(!this.isExpired&&(this.durationTimer+=e,this.durationTimer>=this.options.duration&&(this.currentLoop++,this.durationTimer=0,this.attemptedBurstIndices=[]),!this.isExpired)){for(var t=0,n=0,r=this.emission.bursts;n<r.length;n++){var i=r[n];if(i.time<=this.durationTimer&&!this.attemptedBurstIndices.includes(t)){for(var a=o.evaluateVariation(i.count),s=0;s<a;s++)this.emitParticle();this.attemptedBurstIndices.push(t)}t++}this.emissionTimer+=e;for(var u=1/this.emission.rate;this.emissionTimer>u;)this.emissionTimer-=u,this.emitParticle()}var c=function(t){var n=l.particles[t];l.tickParticle(n,e),l.options.despawningRules.some((function(e){return e(n)}))&&l.particles.splice(t,1)},l=this;for(s=this.particles.length-1;s>=0;s--)c(s)},e.prototype.tickParticle=function(e,t){e.lifetime-=t,this.options.useGravity&&(e.velocity=e.velocity.add(r.Vector.up.scale(i.settings.gravity*t))),e.location=e.location.add(e.velocity.scale(t));for(var n=0,o=this.options.modules;n<o.length;n++){(0,o[n])(e)}},e.prototype.emitParticle=function(){var e=new u.Particle({location:this.emission.sourceSampler(),lifetime:o.evaluateVariation(this.emission.initialLifetime),velocity:r.Vector.from2dAngle(o.evaluateVariation(this.emission.angle)).scale(o.evaluateVariation(this.emission.initialSpeed)),size:o.evaluateVariation(this.emission.initialSize),rotation:o.evaluateVariation(this.emission.initialRotation),color:o.evaluateVariation(this.emission.initialColor)});return this.particles.push(e),this.particles.length>this.options.maxParticles&&this.particles.shift(),e},e}();t.Emitter=c},4830:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultEmissionOptions=void 0;var r=n(5020),i=n(6256);t.getDefaultEmissionOptions=function(){return{rate:10,angle:0,bursts:[],sourceSampler:i.rectSource(r.Rect.zero),initialLifetime:5,initialSpeed:5,initialSize:1,initialRotation:r.Vector.zero,initialColor:r.Color.white}}},8851:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultEmitterOptions=void 0;var r=n(6683);t.getDefaultEmitterOptions=function(){return{duration:5,loops:1,useGravity:!0,maxParticles:300,despawningRules:[r.despawningRules.lifetime,r.despawningRules.bounds],modules:[]}}},6755:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(8851),t),i(n(4830),t),i(n(6753),t)},6753:function(e,t){"use strict";function n(e,t){var n=e.toHex();switch(t.nodeName.toLowerCase()){case"div":t.style.background=n;break;case"svg":t.style.fill=t.style.color=n;break;default:t.style.color=n}}function r(e,t){t.style.opacity=e.toString()}function i(e,t){t.style.filter="brightness("+(.5+Math.abs(e))+")"}function o(e,t){t.style.transform="translateX("+e.location.x.toFixed(3)+"px) translateY("+e.location.y.toFixed(3)+"px) translateZ("+e.location.z.toFixed(3)+"px) rotateX("+e.rotation.x.toFixed(3)+"deg) rotateY("+e.rotation.y.toFixed(3)+"deg) rotateZ("+e.rotation.z.toFixed(3)+"deg) scale("+e.size.toFixed(3)+")"}Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultRendererOptions=void 0,t.getDefaultRendererOptions=function(){return{shapeFactory:"square",applyColor:n,applyOpacity:r,applyLighting:i,applyTransform:o}}},5356:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Particle=void 0;var r=n(5020),i=n(6814),o=function(e){var t=i.overrideDefaults({lifetime:0,size:1,location:r.Vector.zero,rotation:r.Vector.zero,velocity:r.Vector.zero,color:r.Color.white,opacity:1},e);this.id=Symbol(),this.size=this.initialSize=t.size,this.lifetime=this.initialLifetime=t.lifetime,this.rotation=this.initialRotation=t.rotation,this.location=t.location,this.velocity=t.velocity,this.color=t.color,this.opacity=t.opacity};t.Particle=o},7861:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;var r=n(3828),i=n(9065),o=n(3779),a=n(3644),s=function(){function e(){this.elements=new Map,this.light=new r.Vector(0,0,1)}return e.prototype.begin=function(){this.renderedParticles=[]},e.prototype.end=function(){for(var e=this.elements.keys(),t=e.next();!t.done;){var n=t.value;this.renderedParticles.includes(n)||(this.elements.get(n).remove(),this.elements.delete(n)),t=e.next()}return this.renderedParticles.length},e.prototype.renderParticle=function(e,t){var n=t.renderer,r=this.elements.has(e.id)?this.elements.get(e.id):this.createParticleElement(e,n);if(n.applyColor&&n.applyColor(e.color,r),n.applyOpacity&&n.applyOpacity(e.opacity,r),n.applyLighting){var i=a.rotationToNormal(e.rotation).dot(this.light);n.applyLighting(i,r)}n.applyTransform&&n.applyTransform(e,r),this.renderedParticles.push(e.id)},e.prototype.createParticleElement=function(e,t){var n=o.resolveShapeFactory(t.shapeFactory).cloneNode(!0);return n.style.position="absolute",this.elements.set(e.id,i.particleContainer.current.appendChild(n)),n},e}();t.Renderer=s},3120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scene=void 0;var r=n(5915),i=n(8232),o=n(7861),a=function(){function e(){this.emitters=[],this.debug=new r.Debug(this),this.renderer=new o.Renderer,this.scheduledTickId=void 0,this.lastTickTimestamp=performance.now(),this.tick=this.tick.bind(this),this.scheduleTick()}return e.prototype.createEmitter=function(e){var t=new i.Emitter(e);return this.emitters.push(t),t},e.prototype.clearEmitters=function(){return this.emitters.splice(0).length},e.prototype.clearParticles=function(){return this.emitters.reduce((function(e,t){return e+t.clearParticles()}),0)},e.prototype.scheduleTick=function(){this.scheduledTickId=window.requestAnimationFrame(this.tick)},e.prototype.cancelTick=function(){window.cancelAnimationFrame(this.scheduledTickId)},e.prototype.tick=function(e){var t=(e-this.lastTickTimestamp)/1e3;try{for(var n=0;n<this.emitters.length;n++){(o=this.emitters[n]).tick(t),o.isExpired&&o.canRemove&&this.emitters.splice(n--,1)}}catch(c){console.error("An error occurred while updating the scene's emitters:\n\""+c+'"')}try{this.renderer.begin();for(var r=0,i=this.emitters;r<i.length;r++)for(var o=i[r],a=0,s=o.particles;a<s.length;a++){var u=s[a];this.renderer.renderParticle(u,o)}this.renderer.end()}catch(c){console.error("An error occurred while rendering the scene's particles:\n\""+c+'"')}this.debug.tick(t),this.lastTickTimestamp=e,this.scheduleTick()},e}();t.Scene=a},7509:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settings=void 0,t.settings={debug:!1,gravity:800,zIndex:99999}},7720:function(e,t){"use strict";function n(e,t,n){return(1-n)*e+n*t}Object.defineProperty(t,"__esModule",{value:!0}),t.approximately=t.clamp=t.invlerp=t.slerp=t.lerp=t.epsilon=t.rad2deg=t.deg2rad=void 0,t.deg2rad=Math.PI/180,t.rad2deg=180/Math.PI,t.epsilon=1e-6,t.lerp=n,t.slerp=function(e,t,r){return n(e,t,(1-Math.cos(r*Math.PI))/2)},t.invlerp=function(e,t,n){return(n-e)/(t-e)},t.clamp=function(e,t,n){return Math.min(n,Math.max(t,e))},t.approximately=function(e,n){return Math.abs(e-n)<t.epsilon}},2450:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleBuilder=void 0;var r=n(5020),i=function(){function e(){this.factor="lifetime",this.isRelative=!1}return e.prototype.drive=function(e){return this.driverKey=e,this},e.prototype.through=function(e){return this.factor=e,this},e.prototype.by=function(e){return this.driverValue=e,this},e.prototype.relative=function(e){return void 0===e&&(e=!0),this.isRelative=e,this},e.prototype.build=function(){var e=this;if(void 0===this.driverKey)throw new Error("No driving key was provided in the module builder. Did you forget a '.drive()' call?");if(void 0===this.driverValue)throw new Error("No driving value was provided in the module builder. Did you forget a '.through()' call?");return function(t){o(t,e.driverKey,function(e,t,n){if("object"==typeof e&&"evaluate"in e)return e.evaluate(t);if("function"==typeof e)return e(t,n);return e}(e.driverValue,function(e,t){switch(e){case"lifetime":return t.initialLifetime-t.lifetime;case"relativeLifetime":return(t.initialLifetime-t.lifetime)/t.initialLifetime;case"size":return t.size;default:throw new Error("Invalid driving factor '"+e+"'.")}}(e.factor,t),t),e.isRelative)}},e}();function o(e,t,n,i){if(void 0===i&&(i=!1),i){var a=e["initial"+t[0].toUpperCase()+t.substr(1)];if(void 0===a)throw new Error("Unable to use relative chaining with key '"+t+"'; no initial value exists.");if(n instanceof r.Vector)o(e,t,a.add(n));else{if("number"!=typeof n)throw new Error("Unable to use relative chaining with particle key '"+t+"'; no relative operation for '"+n+"' could be inferred.");o(e,t,a*n)}}else e[t]=n}t.ModuleBuilder=i},4123:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomInsideCircle=t.randomInsideRect=t.randomUnitVector=t.pick=t.randomRange=void 0;var r=n(5020),i=n(7720);function o(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),i.lerp(e,t,Math.random())}t.randomRange=o,t.pick=function(e){return 0===e.length?void 0:e[Math.floor(Math.random()*e.length)]},t.randomUnitVector=function(){var e=o(0,2*Math.PI),t=o(-1,1);return new r.Vector(Math.sqrt(1-t*t)*Math.cos(e),Math.sqrt(1-t*t)*Math.sin(e),t)},t.randomInsideRect=function(e){return new r.Vector(e.x+o(0,e.width),e.y+o(0,e.height))},t.randomInsideCircle=function(e){var t=o(0,2*Math.PI),n=o(0,e.radius);return new r.Vector(e.x+Math.cos(t)*n,e.y+Math.sin(t)*n)}},3779:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveShapeFactory=t.resolvableShapes=void 0;var r=n(6922);t.resolvableShapes={square:'<div style="height: 10px; width: 10px;"></div>',rectangle:'<div style="height: 6px; width: 10px;"></div>',circle:'<svg viewBox="0 0 2 2" width="10" height="10"><circle cx="1" cy="1" r="1" fill="currentColor"/></svg>',roundedSquare:'<div style="height: 10px; width: 10px; border-radius: 3px;"></div>',roundedRectangle:'<div style="height: 6px; width: 10px; border-radius: 3px;"></div>',star:'<svg viewBox="0 0 512 512" width="15" height="15"><polygon fill="currentColor" points="512,197.816 325.961,185.585 255.898,9.569 185.835,185.585 0,197.816 142.534,318.842 95.762,502.431 255.898,401.21 416.035,502.431 369.263,318.842"/></svg>'},t.resolveShapeFactory=function(e){var n=r.evaluateVariation(e);if("string"==typeof n){var i=t.resolvableShapes[n];if(!i)throw new Error("Failed to resolve shape key '"+n+"'. Did you forget to add it to the 'resolvableShapes' lookup?");var o=document.createElement("div");return o.innerHTML=i,o.firstElementChild}return n}},6256:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mouseSource=t.elementSource=t.rectSource=t.circleSource=t.dynamicSource=void 0;var r=n(5020),i=n(4123);function o(e){return function(){return i.randomInsideCircle(e)}}function a(e){return function(){return i.randomInsideRect(e)}}function s(e){return function(){return i.randomInsideRect(r.Rect.fromElement(e))}}function u(e){return function(){return new r.Vector(window.scrollX+e.clientX,window.scrollY+e.clientY)}}t.dynamicSource=function(e){if("radius"in e)return o(e);if("width"in e)return a(e);if("getBoundingClientRect"in e)return s(e);if("clientX"in e)return u(e);throw new Error("Cannot infer the source type of '"+e+"'.")},t.circleSource=o,t.rectSource=a,t.elementSource=s,t.mouseSource=u},6922:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gradientSample=t.splineSample=t.skewRelative=t.skew=t.range=t.evaluateVariation=void 0;var r=n(4123);function i(e){return function(){return e.evaluate(Math.random())}}t.evaluateVariation=function(e){return Array.isArray(e)?r.pick(e):"function"==typeof e?e():e},t.range=function(e,t){return function(){return r.randomRange(e,t)}},t.skew=function(e,t){return function(){return e+r.randomRange(-t,t)}},t.skewRelative=function(e,t){return function(){return e*(1+r.randomRange(-t,t))}},t.splineSample=i,t.gradientSample=function(e){return i(e)}},7200:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.confetti=void 0;var r=n(6945),i=n(5020),o=n(2450),a=n(4123),s=n(6256),u=n(6922);t.confetti=function(e,t){var n=r.default.util.overrideDefaults({count:r.default.variation.range(20,40),spread:r.default.variation.range(35,45),speed:r.default.variation.range(300,600),size:r.default.variation.skew(1,.2),rotation:function(){return a.randomUnitVector().scale(180)},color:function(){return i.Color.fromHsl(a.randomRange(0,360),100,70)},modules:[(new o.ModuleBuilder).drive("size").by((function(e){return Math.min(1,3*e)})).build(),(new o.ModuleBuilder).drive("rotation").by((function(e){return new i.Vector(140,200,260).scale(e)})).relative().build()],shapes:["square","circle"]},t);return r.default.scene.current.createEmitter({emitterOptions:{loops:1,duration:8,modules:n.modules},emissionOptions:{rate:0,bursts:[{time:0,count:n.count}],sourceSampler:s.dynamicSource(e),angle:u.skew(-90,u.evaluateVariation(n.spread)),initialLifetime:u.range(6,8),initialSpeed:n.speed,initialSize:n.size,initialRotation:n.rotation,initialColor:n.color},rendererOptions:{shapeFactory:n.shapes}})}},3012:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7200),t),i(n(9801),t)},9801:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sparkles=void 0;var r=n(6945),i=n(5020),o=n(2450),a=n(4123),s=n(6256),u=n(6922);t.sparkles=function(e,t){var n=r.default.util.overrideDefaults({count:u.range(10,20),speed:u.range(100,200),size:u.range(.8,1.8),rotation:function(){return new i.Vector(0,0,a.randomRange(0,360))},color:function(){return i.Color.fromHsl(50,100,a.randomRange(55,85))},modules:[(new o.ModuleBuilder).drive("rotation").by((function(e){return new i.Vector(0,0,200).scale(e)})).build(),(new o.ModuleBuilder).drive("size").by(new i.NumericSpline({time:0,value:0},{time:.3,value:1},{time:.7,value:1},{time:1,value:0})).through("relativeLifetime").relative().build(),(new o.ModuleBuilder).drive("opacity").by(new i.NumericSpline({time:0,value:1},{time:.5,value:1},{time:1,value:0})).through("relativeLifetime").build()]},t);return r.default.scene.current.createEmitter({emitterOptions:{loops:1,duration:3,useGravity:!1,modules:n.modules},emissionOptions:{rate:0,bursts:[{time:0,count:n.count}],sourceSampler:s.dynamicSource(e),angle:u.range(0,360),initialLifetime:u.range(1,2),initialSpeed:n.speed,initialSize:n.size,initialRotation:n.rotation,initialColor:n.color},rendererOptions:{applyLighting:void 0,shapeFactory:"star"}})}},6814:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overrideDefaults=void 0,t.overrideDefaults=function(e,t){return Object.assign({},e,t)}},3644:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(6814),t),i(n(5152),t),i(n(6683),t),i(n(4530),t)},4530:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lazy=void 0;var n=function(){function e(t,n){void 0===n&&(n=e.defaultExists),this.factory=t,this.exists=n}return Object.defineProperty(e.prototype,"current",{get:function(){return this.exists(this.value)||(this.value=this.factory()),this.value},enumerable:!1,configurable:!0}),e.defaultExists=function(e){return void 0!==e},e}();t.Lazy=n},5152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rotationToNormal=void 0;var r=n(5020),i=n(7720);t.rotationToNormal=function(e){var t=e.x*i.deg2rad,n=e.y*i.deg2rad,o=new r.Vector(Math.cos(n),0,Math.sin(n)),a=new r.Vector(0,Math.cos(t),Math.sin(t));return o.cross(a)}},6683:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.despawningRules=void 0,t.despawningRules={lifetime:function(e){return e.lifetime<=0},bounds:function(e){var t=document.documentElement.scrollHeight;return e.location.y>t}}},9897:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return u},metadata:function(){return c},toc:function(){return l},default:function(){return p}});var r=n(2122),i=n(9756),o=(n(7294),n(3905)),a=n(4489),s=n(4782),u={title:"Custom Effects"},c={unversionedId:"guides/custom-effects",id:"guides/custom-effects",isDocsHomePage:!1,title:"Custom Effects",description:"Introduction",source:"@site/docs/guides/custom-effects.mdx",sourceDirName:"guides",slug:"/guides/custom-effects",permalink:"/docs/guides/custom-effects",editUrl:"https://github.com/yiliansource/party-js/edit/main/docs/docs/guides/custom-effects.mdx",version:"current",frontMatter:{title:"Custom Effects"},sidebar:"sidebar",previous:{title:"Using Templates",permalink:"/docs/guides/using-templates"},next:{title:"Server-Side Rendering",permalink:"/docs/advanced/ssr"}},l=[{value:"Introduction",id:"introduction",children:[]},{value:"Example",id:"example",children:[]},{value:"Breakdown",id:"breakdown",children:[{value:"Configuration",id:"configuration",children:[]},{value:"Creating the emitter",id:"creating-the-emitter",children:[]},{value:"All done!",id:"all-done",children:[]}]},{value:"&quot;Hearts&quot; Demo",id:"hearts-demo",children:[]}],d={toc:l};function p(e){var t=e.components,n=(0,i.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"As we've seen before, ",(0,o.kt)("a",{parentName:"p",href:"/docs/ref/templates"},"templates")," are powerful tools, but sometimes you might want more control over the effects you create than what the library offers pre-made. This chapter will break down how a template is built, and how you can use that knowledge to create your own effects using emitters, variations and modules."),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("p",null,"To understand how custom effects work, let's break down the ",(0,o.kt)("a",{parentName:"p",href:"/docs/ref/templates#confetti"},"confetti")," template we saw before. Note that some parts are omitted for the sake of brevity."),(0,o.kt)(a.Z,{method:function(e,t){return e.confetti(t)},mdxType:"DemoCodeblock"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'function confetti(source, options): Emitter {\n    const populated = party.util.overrideDefaults(\n        {\n            modules: [\n                new ModuleBuilder()\n                    .drive("size")\n                    .by((t) => Math.min(1, t * 3))\n                    .build(),\n            ],\n        },\n        options\n    );\n\n    const emitter = party.scene.current.createEmitter({\n        emitterOptions: {\n            modules: populated.modules,\n        },\n        emissionOptions: {\n            rate: 0,\n            bursts: [{ time: 0, count: populated.count }],\n\n            source,\n            angle: party.variation.skew(\n                -90,\n                party.variation.evaluateVariation(populated.spread)\n            ),\n\n            initialSpeed: populated.speed,\n            initialLifetime: party.variation.range(6, 8),\n        },\n        rendererOptions: {\n            shapeFactory: populated.shapes,\n        },\n    });\n\n    return emitter;\n}\n'))),(0,o.kt)("h2",{id:"breakdown"},"Breakdown"),(0,o.kt)("h3",{id:"configuration"},"Configuration"),(0,o.kt)("p",null,"Let's break down the effect bit by bit. First, we provide fill in values that the user potentially omitted, to ensure that all the configuration we need has a proper value. For now, let's just focus on the ",(0,o.kt)("em",{parentName:"p"},"modules"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'const populated = party.util.overrideDefaults(\n    {\n        modules: [\n            new ModuleBuilder()\n                .drive("size")\n                .by((t) => Math.min(1, t * 3))\n                .build(),\n        ],\n    },\n    options\n);\n')),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"/docs/ref/particle-modules"},"Modules")," allow particle to change their appearance over their lifetime. How they work is best explained on their own documentation page, but here we are simply creating a new module function that drives the size of the particles over their lifetime."),(0,o.kt)("h3",{id:"creating-the-emitter"},"Creating the emitter"),(0,o.kt)("p",null,"After we've prepared all the options we need, it's time to finally create the ",(0,o.kt)("inlineCode",{parentName:"p"},"Emitter")," object. This is the instance that will ultimately be responsible for spawning our confetti-particles."),(0,o.kt)("p",null,"We use the fact that we can pass every configuration option that we need directly into the method that creates a new emitter in the scene."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const emitter = party.scene.current.createEmitter({\n    emitterOptions: {\n        modules: populated.modules,\n    },\n    emissionOptions: {\n        rate: 0,\n        bursts: [{ time: 0, count: populated.count }],\n        source,\n        angle: party.variation.skew(\n            -90,\n            party.variation.evaluateVariation(populated.spread)\n        ),\n        initialSpeed: populated.speed,\n        initialLifetime: party.variation.range(6, 8),\n    },\n    rendererOptions: {\n        shapeFactory: populated.shapes,\n    },\n});\n")),(0,o.kt)("p",null,"Note that we're passing ",(0,o.kt)("a",{parentName:"p",href:"/docs/ref/variations"},"variations")," to some of the options. This is to - as the name might suggest - allow variety in the way that particles are emitted. You can learn more about variations on their documentation page."),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"emitter options")," control what properties the emitted particle are given after they are spawned, things like color, velocity or rotation."),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"emission options")," control the speed at which particles are emitted. The ",(0,o.kt)("inlineCode",{parentName:"p"},"rate")," option specifies how many particles should be emitted per second, while the ",(0,o.kt)("inlineCode",{parentName:"p"},"bursts")," option can be used to specify points in time at which groups of particles should be spawned. For the confetti effect, we only want particles to be emitted all at once, so this is fitting."),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"shape options")," specify the area that particles are emitted from, and the direction that they are emitted in. The source is defined by a rectangle."),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"renderer options")," define the way that particles appear on the screen, and how certain properties of them are applied to their looks, for example the lighting and transform."),(0,o.kt)("h3",{id:"all-done"},"All done!"),(0,o.kt)("p",null,"That's all there is to it! If you want to learn more about how to create custom effects, you can check out the other guides."),(0,o.kt)("h2",{id:"hearts-demo"},'"Hearts" Demo'),(0,o.kt)("p",null,"With the knowledge we just gained from learning how custom effects work, we can create more effects, such as the ",(0,o.kt)("em",{parentName:"p"},"hearts")," effect seen in the demo."),(0,o.kt)(a.Z,{method:function(e,t){(0,s.iW)(t)},mdxType:"DemoCodeblock"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const heartPath = document.createElementNS(\n    "http://www.w3.org/2000/svg",\n    "path"\n);\nheartPath.setAttribute(\n    "d",\n    "M316.722,29.761c66.852,0,121.053,54.202,121.053,121.041c0,110.478-218.893,257.212-218.893,257.212S0,266.569,0,150.801 C0,67.584,54.202,29.761,121.041,29.761c40.262,0,75.827,19.745,97.841,49.976C240.899,49.506,276.47,29.761,316.722,29.761z"\n);\n\nconst heartShape = document.createElementNS(\n    "http://www.w3.org/2000/svg",\n    "svg"\n);\nheartShape.setAttribute("viewBox", "0 0 512 512");\nheartShape.setAttribute("height", "20");\nheartShape.setAttribute("width", "20");\nheartShape.appendChild(heartPath);\n\nparty.scene.current.createEmitter({\n    emitterOptions: {\n        loops: 1,\n        useGravity: false,\n        modules: [\n            new party.ModuleBuilder()\n                .drive("size")\n                .by((t) => 0.5 + 0.3 * (Math.cos(t * 10) + 1))\n                .build(),\n            new party.ModuleBuilder()\n                .drive("rotation")\n                .by((t) => new party.Vector(0, 0, 100).scale(t))\n                .relative()\n                .build(),\n        ],\n    },\n    emissionOptions: {\n        rate: 0,\n        bursts: [{ time: 0, count: party.variation.skew(20, 10) }],\n        sourceSampler: party.sources.dynamicSource(source),\n        angle: party.variation.range(0, 360),\n        initialSpeed: 400,\n        initialColor: party.variation.gradientSample(\n            party.Gradient.simple(\n                party.Color.fromHex("#ffa68d"),\n                party.Color.fromHex("#fd3a84")\n            )\n        ),\n    },\n    rendererOptions: {\n        shapeFactory: heartShape,\n        applyLighting: undefined,\n    },\n});\n'))))}p.isMDXComponent=!0}}]);